addons:
  apt:
    packages:
    - docker-ce
env:
  global:
  - secure: Wnt31djdwWpuUsYQcUKyazhawQdJRC3cIDt8adjgMnzz8XW4zJVeUmsc43guh1LypIbbs6QEV8IFJLVhXuVddjlENUM4WA90vkqMiy+RZTXwb4vyR6Eino9QbaCVMboO4DANhs8AXi6CIEWfk82NRmQrjpGyjTiGwlNpiQAol5WTv9u/A7qlLyp6uo+ci0zLM3Z8wK/YCRGKK6O7GEIalinkCmTvoAZ40te1K3KL5PmDNN3DGg4hOVAeXzwz5rc//kke+KiqMjV9DHxtCNMH/hM7XO/zFxxifa67o3mI4TrYsU157yM2Ti0jrY/Dbhwy3ILZgVsOW8thajzfzormIUwzg3Um0nnEi8AlP22zsdHWaHXAs/F5hPCQPw1kC8gWYPGLqehPQp8aYxrAN8ZbG7UYj4giFRu2N2V6+dISCp4QMmcrsxAFsx3w7Ni0jq01JC9lH1KWewEsK/CABlCJruIuieSHX4SPe7wI70NNH7FhlAwTGxC14BoHGkZxjhScxwUsdtavqYee/VKxXd7/SE/HLwbRURda90LZDCgM58rR/s+oSY1exAccmFt2KzXQViBGbXbuWp2y9NAiODyKoY39M58QjHbz0YTN+E3yZpnQ3gZCC9kRXsayIQLwgeA7FEc2lTpXWmqlHJW51X0o/f+A+dQxhTmKrzkx3tKj8tM=
  - secure: jWdu3XLN6L4rNNpCSi9lazHZ4k3QmtuNIc6Fpe7iJnYVHztAyUy9rDa13kXom0qBut4cqEsUFezty9FNne03hlW3ivx3JXJtRv6eTR/LXKHw8u3B9KWQVOYMDyAaxvmFEVQmyJm+2L59DZQijc1ZiEF+K2ESQPriXZHDyaIj2fjoxl3fgV8Je94YKsA3fjqpphQcf2wgFcB5bwJ+VWDXEbGSNWP7wvVgHaYndeFv2ryow4n5qo9gciUeamLcDel3klq45CbGR3cT8mKrS1nrDs0zfm9S1fgAMvSc3sLpyCGxOkZyNDJTR14ANulTp3KZ4hICEehh3kO0IWtqSS79SZKa1uTRqJWTntYooRE7XC0ni+gMjqI5B61lpSjzz/0X7u84JvlZOXOlIoTsiMh3J4cmf8aleXZxSd/9dCkqEPkXQcEKwFsLdJHzCO1FNJxEskM5pAMPjAKtK2V6bmpM4a38hQAO3ne+M6usKGFG2VPFLrKGsqaBk6xWFEGsuCKkNMUTy1heBZXOp9ZaNf9NxiHn4O5c52oJKtdSCV4zHcQbnjDx3b0SDuxzSLWyfhVMaSA2bq3nMmly6OPTonSoRaJx//fTKPNductbgpdUdD9na2nazwoZo6lppsY3AAiOi/LSoB87ejMTcsAq1NG5LIB8Ft8LbxECBkjgaaFP8ls=
script:
- cp .env.example .env
- docker-compose up -d
- docker-compose exec web python3 manage.py test apps
- docker-compose down
deploy:
  provider: heroku
  api_key:
    secure: P3SE0I/rzHIrn5+7wB9tD+R+pBVtiwkJz2l0Mha6eT+GFkbcQeQJ5VogLiHR8LYJ/NAIMxoHS/YVdwsy5xzGLo/mJcZ8bKYrIG3GsbD5KBKvRXukOzax5qGEITS2ArUfK59+vKalzZMumnRoLU0fgXO/SRW4UaA8r5YuTW4TbG9GjFTfCqDjtSL5iK7nNtu8xxTkVmXnw6n8jMnKBGvb9866Ld392e4sA6U0aVSTkSpUmPYkq6FnsDsWdZGNBTin/yvIQYj+jLeuGFI4Gq+0e5g0w7/WXj9AIwPA3dlvQL+bOxMIrx+nV9KLl7J+kh7WoMGwNrGlPADjgMPliLgHSW4AdrIiSQ552qHWf5U+g6uSYECaQBQoL+9nff2qQYO00Kqtbm7r4uDPF5Fkmp/BO0s/XtdmDmBqLfDvi43Y4JUc1/OGfwIZG7mPKl7zFM4W4xFcphtF+zOUttk6b3p1oJNkwEOb94T5Gt70pj7Q+yFcOUJGXye87Yx0g0WKVMQceuZalA77d1DvYdJZQBsCab3PLGgOEk3KLg7sokwsGoRw9vODexGMyxHEZQy1ZejO6NGB3lt85h41cOhMnw/DlqCCYwM8+RKmV6c/6vU7kAO124MJBMpae4aek87P4aWt3f9Vsc+tFi2Fn5EiDk9kCZfffqUJVcZQto5iDpB+j1U=
  app: vibely-web
  skip_cleanup: true
  on:
    repo: quimpm/web_project
    branch: feature/docker
